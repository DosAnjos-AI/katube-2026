 """
        Consolida blocos removendo duplicações mantendo granularidade temporal
        Estratégia: Remove apenas duplicações exatas consecutivas
        Adiciona flag 'comeca_locutor' para marcar início de fala de novo locutor
        
        Regras para comeca_locutor:
        - True: Primeiro bloco OU bloco com marcador de mudança de locutor (>>)
        - False: Continuação do mesmo locutor (mudança apenas por timestamp)
        """
        if not blocos_raw:
            return []
        
        trechos_final = []
        ultimo_texto = None
        primeiro_bloco = True
        ultimo_foi_mudanca_locutor = False
        
        for bloco in blocos_raw:
            texto_atual = bloco['texto']
            tem_marcador_locutor = bloco['mudanca_locutor']
            
            # Se é texto diferente do último, adiciona
            if texto_atual != ultimo_texto:
                # Determinar se começa novo locutor:
                # 1. Primeiro bloco sempre é True
                # 2. Se tem marcador >> é True
                # 3. Caso contrário é False (continuação por timestamp)
                comeca_locutor = primeiro_bloco or tem_marcador_locutor
                
                trechos_final.append({
                    'texto': texto_atual,
                    'inicio': bloco['inicio'],
                    'fim': bloco['fim'],
                    'comeca_locutor': comeca_locutor
                })
                
                ultimo_texto = texto_atual
                primeiro_bloco = False
                ultimo_foi_mudanca_locutor = tem_marcador_locutor
        
        return trechos_final


        PASTA_ORIGEM = "arquivos/temp/"+id_video+"/01-arquivos_originais"  # Substituir pelo caminho real (input: CSV + áudio)
PASTA_DESTINO = "arquivos/temp/"+id_video+"/02-segmentos_originais"  # Substituir pelo caminho real (output: segmentos + JSON)
